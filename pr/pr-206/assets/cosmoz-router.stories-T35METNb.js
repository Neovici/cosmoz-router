const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./home-BXiaMn1S.js","./iframe-Cw9CRLWz.js","./view-1-Bf2J8l3w.js","./view-2-BGr3zDMY.js","./view-3-BTNVuvHK.js"])))=>i.map(i=>d[i]);
import{f as st,B as rt,x as Q,T as S,i as nt,E as j,_ as y}from"./iframe-Cw9CRLWz.js";let P,Z=0;function M(e){P=e}function N(){P=null,Z=0}function it(){return Z++}const k=Symbol("haunted.phase"),A=Symbol("haunted.hook"),z=Symbol("haunted.update"),T=Symbol("haunted.commit"),_=Symbol("haunted.effects"),w=Symbol("haunted.layoutEffects"),O="haunted.context";class ot{update;host;virtual;[A];[_];[w];constructor(t,s){this.update=t,this.host=s,this[A]=new Map,this[_]=[],this[w]=[]}run(t){M(this);let s=t();return N(),s}_runEffects(t){let s=this[t];M(this);for(let r of s)r.call(this);N()}runEffects(){this._runEffects(_)}runLayoutEffects(){this._runEffects(w)}teardown(){this[A].forEach(s=>{typeof s.teardown=="function"&&s.teardown(!0)})}}const ut=Promise.resolve().then.bind(Promise.resolve());function G(){let e=[],t;function s(){t=null;let r=e;e=[];for(var n=0,i=r.length;n<i;n++)r[n]()}return function(r){e.push(r),t==null&&(t=ut(s))}}const ct=G(),U=G();class at{renderer;host;state;[k];_updateQueued;_active;constructor(t,s){this.renderer=t,this.host=s,this.state=new ot(this.update.bind(this),s),this[k]=null,this._updateQueued=!1,this._active=!0}update(){this._active&&(this._updateQueued||(ct(()=>{let t=this.handlePhase(z);U(()=>{this.handlePhase(T,t),U(()=>{this.handlePhase(_)})}),this._updateQueued=!1}),this._updateQueued=!0))}handlePhase(t,s){switch(this[k]=t,t){case T:this.commit(s),this.runEffects(w);return;case z:return this.render();case _:return this.runEffects(_)}}render(){return this.state.run(()=>this.renderer.call(this.host,this.host))}runEffects(t){this.state._runEffects(t)}teardown(){this.state.teardown()}pause(){this._active=!1}resume(){this._active=!0}}const ht=(...e)=>{const t=new CSSStyleSheet;return t.replaceSync(e.join("")),t},lt=e=>e?.map(t=>typeof t=="string"?ht(t):t),dt=(e="")=>e.replace(/-+([a-z])?/g,(t,s)=>s?s.toUpperCase():"");function ft(e){class t extends at{frag;renderResult;constructor(n,i,d){super(n,d||i),this.frag=i}commit(n){this.renderResult=e(n,this.frag)}}function s(r,n,i){const d=(i||n||{}).baseElement||HTMLElement,{observedAttributes:h=[],useShadowDOM:f=!0,shadowRootInit:R={},styleSheets:p}=i||n||{},m=lt(r.styleSheets||p);class L extends d{_scheduler;static get observedAttributes(){return r.observedAttributes||h||[]}constructor(){if(super(),f===!1)this._scheduler=new t(r,this);else{const o=this.attachShadow({mode:"open",...R});m&&(o.adoptedStyleSheets=m),this._scheduler=new t(r,o,this)}}connectedCallback(){this._scheduler.resume(),this._scheduler.update(),this._scheduler.renderResult?.setConnected(!0)}disconnectedCallback(){this._scheduler.pause(),this._scheduler.teardown(),this._scheduler.renderResult?.setConnected(!1)}attributeChangedCallback(o,a,u){if(a===u)return;let c=u===""?!0:u;Reflect.set(this,dt(o),c)}}function tt(l){let o=l,a=!1;return Object.freeze({enumerable:!0,configurable:!0,get(){return o},set(u){a&&o===u||(a=!0,o=u,this._scheduler&&this._scheduler.update())}})}const et=new Proxy(d.prototype,{getPrototypeOf(l){return l},set(l,o,a,u){let c;return o in l?(c=Object.getOwnPropertyDescriptor(l,o),c&&c.set?(c.set.call(u,a),!0):(Reflect.set(l,o,a,u),!0)):(typeof o=="symbol"||o[0]==="_"?c={enumerable:!0,configurable:!0,writable:!0,value:a}:c=tt(a),Object.defineProperty(u,o,c),c.set&&c.set.call(u,a),!0)}});return Object.setPrototypeOf(L.prototype,et),L}return s}class b{id;state;constructor(t,s){this.id=t,this.state=s}}function pt(e,...t){let s=it(),r=P[A],n=r.get(s);return n||(n=new e(s,P,...t),r.set(s,n)),n.update(...t)}function v(e){return pt.bind(null,e)}function K(e){return v(class extends b{callback;lastValues;values;_teardown;constructor(t,s,r,n){super(t,s),e(s,this)}update(t,s){this.callback=t,this.values=s}call(){const t=!this.values||this.hasChanged();this.lastValues=this.values,t&&this.run()}run(){this.teardown(),this._teardown=this.callback.call(this.state)}teardown(t){typeof this._teardown=="function"&&(this._teardown(),this._teardown=void 0),t&&(this.lastValues=this.values=void 0)}hasChanged(){return!this.lastValues||this.values.some((t,s)=>this.lastValues[s]!==t)}})}function V(e,t){e[_].push(t)}const X=K(V),_t=e=>e instanceof Element?e:e.startNode||e.endNode||e.parentNode,mt=v(class extends b{Context;value;_ranEffect;_unsubscribe;constructor(e,t,s){super(e,t),this._updater=this._updater.bind(this),this._ranEffect=!1,this._unsubscribe=null,V(t,this)}update(e){return this.Context!==e&&(this._subscribe(e),this.Context=e),this.value}call(){this._ranEffect||(this._ranEffect=!0,this._unsubscribe&&this._unsubscribe(),this._subscribe(this.Context),this.state.update())}_updater(e){this.value=e,this.state.update()}_subscribe(e){const t={Context:e,callback:this._updater};_t(this.state.host).dispatchEvent(new CustomEvent(O,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));const{unsubscribe:r=null,value:n}=t;this.value=r?n:e.defaultValue,this._unsubscribe=r}teardown(){this._unsubscribe&&this._unsubscribe()}});function bt(e){return t=>{const s={Provider:class extends HTMLElement{listeners;_value;constructor(){super(),this.style.display="contents",this.listeners=new Set,this.addEventListener(O,this)}disconnectedCallback(){this.removeEventListener(O,this)}handleEvent(r){const{detail:n}=r;n.Context===s&&(n.value=this.value,n.unsubscribe=this.unsubscribe.bind(this,n.callback),this.listeners.add(n.callback),r.stopPropagation())}unsubscribe(r){this.listeners.delete(r)}set value(r){this._value=r;for(let n of this.listeners)n(r)}get value(){return this._value}},Consumer:e(function({render:r}){const n=mt(s);return r(n)},{useShadowDOM:!1}),defaultValue:t};return s}}const Y=v(class extends b{value;values;constructor(e,t,s,r){super(e,t),this.value=s(),this.values=r}update(e,t){return this.hasChanged(t)&&(this.values=t,this.value=e()),this.value}hasChanged(e=[]){return e.some((t,s)=>this.values[s]!==t)}});function vt(e,t){e[w].push(t)}K(vt);const wt=v(class extends b{args;constructor(e,t,s){super(e,t),this.updater=this.updater.bind(this),typeof s=="function"&&(s=s()),this.makeArgs(s)}update(){return this.args}updater(e){const[t]=this.args;typeof e=="function"&&(e=e(t)),!Object.is(t,e)&&(this.makeArgs(e),this.state.update())}makeArgs(e){this.args=Object.freeze([e,this.updater])}});v(class extends b{reducer;currentState;constructor(e,t,s,r,n){super(e,t),this.dispatch=this.dispatch.bind(this),this.currentState=n!==void 0?n(r):r}update(e){return this.reducer=e,[this.currentState,this.dispatch]}dispatch(e){this.currentState=this.reducer(this.currentState,e),this.state.update()}});const $t=/([A-Z])/gu;v(class extends b{property;eventName;constructor(e,t,s,r){if(super(e,t),this.state.virtual)throw new Error("Can't be used with virtual components.");this.updater=this.updater.bind(this),this.property=s,this.eventName=s.replace($t,"-$1").toLowerCase()+"-changed",this.state.host[this.property]==null&&(typeof r=="function"&&(r=r()),r!=null&&this.updateProp(r))}update(e,t){return[this.state.host[this.property],this.updater]}updater(e){const t=this.state.host[this.property];typeof e=="function"&&(e=e(t)),!Object.is(t,e)&&this.updateProp(e)}updateProp(e){this.notify(e).defaultPrevented||(this.state.host[this.property]=e)}notify(e){const t=new CustomEvent(this.eventName,{detail:{value:e,path:this.property},cancelable:!0});return this.state.host.dispatchEvent(t),t}});function yt({render:e}){const t=ft(e),s=bt(t);return{component:t,createContext:s}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ct={CHILD:2},B=e=>(...t)=>({_$litDirective$:e,values:t});let q=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,s,r){this._$Ct=t,this._$AM=s,this._$Ci=r}_$AS(t,s){return this.update(t,s)}update(t,s){return this.render(...s)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $=(e,t)=>{const s=e._$AN;if(s===void 0)return!1;for(const r of s)r._$AO?.(t,!1),$(r,t);return!0},x=e=>{let t,s;do{if((t=e._$AM)===void 0)break;s=t._$AN,s.delete(e),e=t}while(s?.size===0)},J=e=>{for(let t;t=e._$AM;e=t){let s=t._$AN;if(s===void 0)t._$AN=s=new Set;else if(s.has(e))break;s.add(e),At(t)}};function gt(e){this._$AN!==void 0?(x(this),this._$AM=e,J(this)):this._$AM=e}function Et(e,t=!1,s=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(t)if(Array.isArray(r))for(let i=s;i<r.length;i++)$(r[i],!1),x(r[i]);else r!=null&&($(r,!1),x(r));else $(this,e)}const At=e=>{e.type==Ct.CHILD&&(e._$AP??=Et,e._$AQ??=gt)};class St extends q{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,s,r){super._$AT(t,s,r),J(this),this.isConnected=t._$AU}_$AO(t,s=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),s&&($(this,t),x(this))}setValue(t){if(st(this._$Ct))this._$Ct._$AI(t,this);else{const s=[...this._$Ct._$AH];s[this._$Ci]=t,this._$Ct._$AI(s,this,0)}}disconnected(){}reconnected(){}}const{component:W}=yt({render:rt}),C=e=>t=>{const s=document.location.origin,r=new URL(t,s).hash.replace(/^#!?/iu,"").replace("%23","#"),n=new URL(r,s),i=n.pathname.match(e);return i&&{result:i,url:n}},Pt=e=>t=>{const s=t.match(e);return s&&{result:s,url:new URL(t,document.location.origin)}},xt=(e,t)=>{for(const s of e){const r=s.rule,n=typeof r=="function"?r(t):Pt(r)(t);if(n)return{...s,route:s,match:n,url:t}}},D=(e,...t)=>Q(Object.assign(e,{raw:!0}),...t),g=(e,t={})=>{if(!customElements.get(e))throw new Error(`Element ${e} is not defined`);if(Object.keys(t).length>0){const s=Object.keys(t).map(r=>` .${r}=`);return D([`<${e}${s[0]}`,...s.slice(1),">"],...Object.values(t))}return D([`<${e}>`])},I=()=>window.location.href.replace(window.location.origin,""),Rt=()=>{const[e,t]=wt(I);return X(()=>{const s=()=>t(I);return window.addEventListener("popstate",s),()=>window.removeEventListener("popstate",s)},[t]),e},kt=e=>{const t=Rt();return Y(()=>xt(e,t),[e,t])},Ot=e=>{const t=kt(e);return{route:t,result:Y(()=>{if(t){const{handle:s,...r}=t;return s(r)}},[t])}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lt={},jt=B(class extends q{constructor(){super(...arguments),this.ot=Lt}render(e,t){return t()}update(e,[t,s]){if(Array.isArray(t)){if(Array.isArray(this.ot)&&this.ot.length===t.length&&t.every((r,n)=>r===this.ot[n]))return S}else if(this.ot===t)return S;return this.ot=Array.isArray(t)?Array.from(t):t,this.render(t,s)}});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Mt{constructor(t){this.G=t}disconnect(){this.G=void 0}reconnect(t){this.G=t}deref(){return this.G}}class Nt{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??=new Promise(t=>this.Z=t)}resume(){this.Z?.(),this.Y=this.Z=void 0}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const F=e=>!nt(e)&&typeof e.then=="function",H=1073741823;class zt extends St{constructor(){super(...arguments),this._$Cwt=H,this._$Cbt=[],this._$CK=new Mt(this),this._$CX=new Nt}render(...t){return t.find(s=>!F(s))??S}update(t,s){const r=this._$Cbt;let n=r.length;this._$Cbt=s;const i=this._$CK,d=this._$CX;this.isConnected||this.disconnected();for(let h=0;h<s.length&&!(h>this._$Cwt);h++){const f=s[h];if(!F(f))return this._$Cwt=h,f;h<n&&f===r[h]||(this._$Cwt=H,n=0,Promise.resolve(f).then(async R=>{for(;d.get();)await d.get();const p=i.deref();if(p!==void 0){const m=p._$Cbt.indexOf(f);m>-1&&m<p._$Cwt&&(p._$Cwt=m,p.setValue(R))}}))}return S}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}const Tt=B(zt),E=(e,t,s)=>e.dispatchEvent(new CustomEvent(t,{bubbles:!1,cancelable:!1,composed:!0,...s})),Ut=(e,t,s)=>{X(()=>{if(!s){E(e,"route-not-found");return}E(e,"route-loading",{detail:t}),Promise.resolve(s).then(()=>E(e,"route-loaded",{detail:t})).catch(r=>E(e,"route-error",{detail:{route:t,error:r}}))},[s])},Dt=e=>{const t=e.routes,{route:s,result:r}=Ot(t);return Ut(e,s,r),jt([r],()=>Tt(Promise.resolve(r).catch(()=>j),j))};customElements.define("cosmoz-router",W(Dt));const It={title:"Cosmoz Router"};customElements.define("demo-router",W(()=>{const e=[{rule:C(/^\/$/u),handle:()=>y(()=>import("./home-BXiaMn1S.js"),__vite__mapDeps([0,1]),import.meta.url).then(()=>g("demo-home"))},{rule:C(/^\/view-1/u),handle:()=>y(()=>import("./view-1-Bf2J8l3w.js"),__vite__mapDeps([2,1]),import.meta.url).then(()=>g("view-1"))},{rule:C(/^\/view-2/u),handle:()=>y(()=>import("./view-2-BGr3zDMY.js"),__vite__mapDeps([3,1]),import.meta.url).then(()=>g("view-2"))},{rule:C(/^\/view-3/u),handle:()=>y(()=>import("./view-3-BTNVuvHK.js"),__vite__mapDeps([4,1]),import.meta.url).then(()=>g("view-3"))}];return Q`<cosmoz-router .routes=${e} />`}));const Ft=()=>`
        <style>
            #content {
                display: flex;
                flex-direction: column;
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
            }
            #view {
                flex: 1;
                flex-basis: 0.000000001px;
                position: relative;
                display: block;
            }

            #appRouter {
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
            }
        </style>
        <div id="content">
            <h1>cosmoz-router test</h1>
            <ul>
                <li><a href="#!/" target="_self">/Home</a></li>
                <li><a href="#!/view-1" target="_self">/view-1</a></li>
                <li><a href="#!/view-2" target="_self">/view-2</a></li>
                <li><a href="#!/view-3" target="_self">/view-3</a></li>
            </ul>

            <div id="view">
                <demo-router />
            </div>
        </div>`,Ht=["Router"],Gt=Object.freeze(Object.defineProperty({__proto__:null,Router:Ft,__namedExportsOrder:Ht,default:It},Symbol.toStringTag,{value:"Module"}));export{X as a,Gt as b,W as c,wt as u};
