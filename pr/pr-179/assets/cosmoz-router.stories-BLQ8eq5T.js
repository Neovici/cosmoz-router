const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./home-CAkf-8rq.js","./iframe-5LBLVpLw.js","./view-1-m2bHa2lO.js","./view-2-DK4Xyosz.js","./view-3-VpzOanoK.js"])))=>i.map(i=>d[i]);
import{f as et,B as st,x as Q,T as S,i as rt,E as L,_ as C}from"./iframe-5LBLVpLw.js";let x,V=0;function M(e){x=e}function j(){x=null,V=0}function nt(){return V++}const R=Symbol("haunted.phase"),A=Symbol("haunted.hook"),z=Symbol("haunted.update"),T=Symbol("haunted.commit"),p=Symbol("haunted.effects"),b=Symbol("haunted.layoutEffects"),O="haunted.context";class it{update;host;virtual;[A];[p];[b];constructor(t,s){this.update=t,this.host=s,this[A]=new Map,this[p]=[],this[b]=[]}run(t){M(this);let s=t();return j(),s}_runEffects(t){let s=this[t];M(this);for(let r of s)r.call(this);j()}runEffects(){this._runEffects(p)}runLayoutEffects(){this._runEffects(b)}teardown(){this[A].forEach(s=>{typeof s.teardown=="function"&&s.teardown()})}}const ot=Promise.resolve().then.bind(Promise.resolve());function G(){let e=[],t;function s(){t=null;let r=e;e=[];for(var n=0,i=r.length;n<i;n++)r[n]()}return function(r){e.push(r),t==null&&(t=ot(s))}}const ut=G(),U=G();class ct{renderer;host;state;[R];_updateQueued;constructor(t,s){this.renderer=t,this.host=s,this.state=new it(this.update.bind(this),s),this[R]=null,this._updateQueued=!1}update(){this._updateQueued||(ut(()=>{let t=this.handlePhase(z);U(()=>{this.handlePhase(T,t),U(()=>{this.handlePhase(p)})}),this._updateQueued=!1}),this._updateQueued=!0)}handlePhase(t,s){switch(this[R]=t,t){case T:this.commit(s),this.runEffects(b);return;case z:return this.render();case p:return this.runEffects(p)}}render(){return this.state.run(()=>this.renderer.call(this.host,this.host))}runEffects(t){this.state._runEffects(t)}teardown(){this.state.teardown()}}const at=(e="")=>e.replace(/-+([a-z])?/g,(t,s)=>s?s.toUpperCase():"");function ht(e){class t extends ct{frag;renderResult;constructor(n,i,f){super(n,f||i),this.frag=i}commit(n){this.renderResult=e(n,this.frag)}}function s(r,n,i){const f=(i||n||{}).baseElement||HTMLElement,{observedAttributes:h=[],useShadowDOM:_=!0,shadowRootInit:k={},styleSheets:l}=i||n||{};class m extends f{_scheduler;static get observedAttributes(){return r.observedAttributes||h||[]}constructor(){if(super(),_===!1)this._scheduler=new t(r,this);else{const o=this.attachShadow({mode:"open",...k});l&&(o.adoptedStyleSheets=l),this._scheduler=new t(r,o,this)}}connectedCallback(){this._scheduler.update(),this._scheduler.renderResult?.setConnected(!0)}disconnectedCallback(){this._scheduler.teardown(),this._scheduler.renderResult?.setConnected(!1)}attributeChangedCallback(o,a,u){if(a===u)return;let c=u===""?!0:u;Reflect.set(this,at(o),c)}}function W(d){let o=d,a=!1;return Object.freeze({enumerable:!0,configurable:!0,get(){return o},set(u){a&&o===u||(a=!0,o=u,this._scheduler&&this._scheduler.update())}})}const tt=new Proxy(f.prototype,{getPrototypeOf(d){return d},set(d,o,a,u){let c;return o in d?(c=Object.getOwnPropertyDescriptor(d,o),c&&c.set?(c.set.call(u,a),!0):(Reflect.set(d,o,a,u),!0)):(typeof o=="symbol"||o[0]==="_"?c={enumerable:!0,configurable:!0,writable:!0,value:a}:c=W(a),Object.defineProperty(u,o,c),c.set&&c.set.call(u,a),!0)}});return Object.setPrototypeOf(m.prototype,tt),m}return s}class ${id;state;constructor(t,s){this.id=t,this.state=s}}function lt(e,...t){let s=nt(),r=x[A],n=r.get(s);return n||(n=new e(s,x,...t),r.set(s,n)),n.update(...t)}function w(e){return lt.bind(null,e)}function K(e){return w(class extends ${callback;lastValues;values;_teardown;constructor(t,s,r,n){super(t,s),e(s,this)}update(t,s){this.callback=t,this.values=s}call(){const t=!this.values||this.hasChanged();this.lastValues=this.values,t&&this.run()}run(){this.teardown(),this._teardown=this.callback.call(this.state)}teardown(){typeof this._teardown=="function"&&this._teardown()}hasChanged(){return!this.lastValues||this.values.some((t,s)=>this.lastValues[s]!==t)}})}function X(e,t){e[p].push(t)}const Y=K(X),dt=e=>e instanceof Element?e:e.startNode||e.endNode||e.parentNode,ft=w(class extends ${Context;value;_ranEffect;_unsubscribe;constructor(e,t,s){super(e,t),this._updater=this._updater.bind(this),this._ranEffect=!1,this._unsubscribe=null,X(t,this)}update(e){return this.Context!==e&&(this._subscribe(e),this.Context=e),this.value}call(){this._ranEffect||(this._ranEffect=!0,this._unsubscribe&&this._unsubscribe(),this._subscribe(this.Context),this.state.update())}_updater(e){this.value=e,this.state.update()}_subscribe(e){const t={Context:e,callback:this._updater};dt(this.state.host).dispatchEvent(new CustomEvent(O,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));const{unsubscribe:r=null,value:n}=t;this.value=r?n:e.defaultValue,this._unsubscribe=r}teardown(){this._unsubscribe&&this._unsubscribe()}});function _t(e){return t=>{const s={Provider:class extends HTMLElement{listeners;_value;constructor(){super(),this.listeners=new Set,this.addEventListener(O,this)}disconnectedCallback(){this.removeEventListener(O,this)}handleEvent(r){const{detail:n}=r;n.Context===s&&(n.value=this.value,n.unsubscribe=this.unsubscribe.bind(this,n.callback),this.listeners.add(n.callback),r.stopPropagation())}unsubscribe(r){this.listeners.delete(r)}set value(r){this._value=r;for(let n of this.listeners)n(r)}get value(){return this._value}},Consumer:e(function({render:r}){const n=ft(s);return r(n)},{useShadowDOM:!1}),defaultValue:t};return s}}const Z=w(class extends ${value;values;constructor(e,t,s,r){super(e,t),this.value=s(),this.values=r}update(e,t){return this.hasChanged(t)&&(this.values=t,this.value=e()),this.value}hasChanged(e=[]){return e.some((t,s)=>this.values[s]!==t)}});function pt(e,t){e[b].push(t)}K(pt);const mt=w(class extends ${args;constructor(e,t,s){super(e,t),this.updater=this.updater.bind(this),typeof s=="function"&&(s=s()),this.makeArgs(s)}update(){return this.args}updater(e){const[t]=this.args;typeof e=="function"&&(e=e(t)),!Object.is(t,e)&&(this.makeArgs(e),this.state.update())}makeArgs(e){this.args=Object.freeze([e,this.updater])}});w(class extends ${reducer;currentState;constructor(e,t,s,r,n){super(e,t),this.dispatch=this.dispatch.bind(this),this.currentState=n!==void 0?n(r):r}update(e){return this.reducer=e,[this.currentState,this.dispatch]}dispatch(e){this.currentState=this.reducer(this.currentState,e),this.state.update()}});function bt({render:e}){const t=ht(e),s=_t(t);return{component:t,createContext:s}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vt={CHILD:2},B=e=>(...t)=>({_$litDirective$:e,values:t});let F=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,s,r){this._$Ct=t,this._$AM=s,this._$Ci=r}_$AS(t,s){return this.update(t,s)}update(t,s){return this.render(...s)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const v=(e,t)=>{const s=e._$AN;if(s===void 0)return!1;for(const r of s)r._$AO?.(t,!1),v(r,t);return!0},P=e=>{let t,s;do{if((t=e._$AM)===void 0)break;s=t._$AN,s.delete(e),e=t}while(s?.size===0)},q=e=>{for(let t;t=e._$AM;e=t){let s=t._$AN;if(s===void 0)t._$AN=s=new Set;else if(s.has(e))break;s.add(e),Ct(t)}};function $t(e){this._$AN!==void 0?(P(this),this._$AM=e,q(this)):this._$AM=e}function wt(e,t=!1,s=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(t)if(Array.isArray(r))for(let i=s;i<r.length;i++)v(r[i],!1),P(r[i]);else r!=null&&(v(r,!1),P(r));else v(this,e)}const Ct=e=>{e.type==vt.CHILD&&(e._$AP??=wt,e._$AQ??=$t)};class gt extends F{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,s,r){super._$AT(t,s,r),q(this),this.isConnected=t._$AU}_$AO(t,s=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),s&&(v(this,t),P(this))}setValue(t){if(et(this._$Ct))this._$Ct._$AI(t,this);else{const s=[...this._$Ct._$AH];s[this._$Ci]=t,this._$Ct._$AI(s,this,0)}}disconnected(){}reconnected(){}}const{component:J}=bt({render:st}),g=e=>t=>{const s=document.location.origin,r=new URL(t,s).hash.replace(/^#!?/iu,"").replace("%23","#"),n=new URL(r,s),i=n.pathname.match(e);return i&&{result:i,url:n}},Et=e=>t=>{const s=t.match(e);return s&&{result:s,url:new URL(t,document.location.origin)}},yt=(e,t)=>{for(const s of e){const r=s.rule,n=typeof r=="function"?r(t):Et(r)(t);if(n)return{...s,route:s,match:n,url:t}}},D=(e,...t)=>Q(Object.assign(e,{raw:!0}),...t),E=(e,t={})=>{if(!customElements.get(e))throw new Error(`Element ${e} is not defined`);if(Object.keys(t).length>0){const s=Object.keys(t).map(r=>` .${r}=`);return D([`<${e}${s[0]}`,...s.slice(1),">"],...Object.values(t))}return D([`<${e}>`])},I=()=>window.location.href.replace(window.location.origin,""),At=()=>{const[e,t]=mt(I);return Y(()=>{const s=()=>t(I);return window.addEventListener("popstate",s),()=>window.removeEventListener("popstate",s)},[t]),e},St=e=>{const t=At();return Z(()=>yt(e,t),[e,t])},xt=e=>{const t=St(e);return{route:t,result:Z(()=>{if(t){const{handle:s,...r}=t;return s(r)}},[t])}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pt={},kt=B(class extends F{constructor(){super(...arguments),this.ot=Pt}render(e,t){return t()}update(e,[t,s]){if(Array.isArray(t)){if(Array.isArray(this.ot)&&this.ot.length===t.length&&t.every((r,n)=>r===this.ot[n]))return S}else if(this.ot===t)return S;return this.ot=Array.isArray(t)?Array.from(t):t,this.render(t,s)}});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Rt{constructor(t){this.G=t}disconnect(){this.G=void 0}reconnect(t){this.G=t}deref(){return this.G}}class Ot{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??=new Promise(t=>this.Z=t)}resume(){this.Z?.(),this.Y=this.Z=void 0}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const N=e=>!rt(e)&&typeof e.then=="function",H=1073741823;class Lt extends gt{constructor(){super(...arguments),this._$Cwt=H,this._$Cbt=[],this._$CK=new Rt(this),this._$CX=new Ot}render(...t){return t.find(s=>!N(s))??S}update(t,s){const r=this._$Cbt;let n=r.length;this._$Cbt=s;const i=this._$CK,f=this._$CX;this.isConnected||this.disconnected();for(let h=0;h<s.length&&!(h>this._$Cwt);h++){const _=s[h];if(!N(_))return this._$Cwt=h,_;h<n&&_===r[h]||(this._$Cwt=H,n=0,Promise.resolve(_).then(async k=>{for(;f.get();)await f.get();const l=i.deref();if(l!==void 0){const m=l._$Cbt.indexOf(_);m>-1&&m<l._$Cwt&&(l._$Cwt=m,l.setValue(k))}}))}return S}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}const Mt=B(Lt),y=(e,t,s)=>e.dispatchEvent(new CustomEvent(t,{bubbles:!1,cancelable:!1,composed:!0,...s})),jt=(e,t,s)=>{Y(()=>{if(!s){y(e,"route-not-found");return}y(e,"route-loading",{detail:t}),Promise.resolve(s).then(()=>y(e,"route-loaded",{detail:t})).catch(r=>y(e,"route-error",{detail:{route:t,error:r}}))},[s])},zt=e=>{const t=e.routes,{route:s,result:r}=xt(t);return jt(e,s,r),kt([r],()=>Mt(Promise.resolve(r).catch(()=>L),L))};customElements.define("cosmoz-router",J(zt));const Tt={title:"Cosmoz Router"};customElements.define("demo-router",J(()=>{const e=[{rule:g(/^\/$/u),handle:()=>C(()=>import("./home-CAkf-8rq.js"),__vite__mapDeps([0,1]),import.meta.url).then(()=>E("demo-home"))},{rule:g(/^\/view-1/u),handle:()=>C(()=>import("./view-1-m2bHa2lO.js"),__vite__mapDeps([2,1]),import.meta.url).then(()=>E("view-1"))},{rule:g(/^\/view-2/u),handle:()=>C(()=>import("./view-2-DK4Xyosz.js"),__vite__mapDeps([3,1]),import.meta.url).then(()=>E("view-2"))},{rule:g(/^\/view-3/u),handle:()=>C(()=>import("./view-3-VpzOanoK.js"),__vite__mapDeps([4,1]),import.meta.url).then(()=>E("view-3"))}];return Q`<cosmoz-router .routes=${e} />`}));const Ut=()=>`
        <style>
            #content {
                display: flex;
                flex-direction: column;
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
            }
            #view {
                flex: 1;
                flex-basis: 0.000000001px;
                position: relative;
                display: block;
            }

            #appRouter {
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
            }
        </style>
        <div id="content">
            <h1>cosmoz-router test</h1>
            <ul>
                <li><a href="#!/" target="_self">/Home</a></li>
                <li><a href="#!/view-1" target="_self">/view-1</a></li>
                <li><a href="#!/view-2" target="_self">/view-2</a></li>
                <li><a href="#!/view-3" target="_self">/view-3</a></li>
            </ul>

            <div id="view">
                <demo-router />
            </div>
        </div>`,Dt=["Router"],Ht=Object.freeze(Object.defineProperty({__proto__:null,Router:Ut,__namedExportsOrder:Dt,default:Tt},Symbol.toStringTag,{value:"Module"}));export{Y as a,Ht as b,J as c,mt as u};
